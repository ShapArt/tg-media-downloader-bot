# BUILD PLAN ‚Äî TG Media Downloader Bot

## üéØ –¶–µ–ª–∏
- –ë–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å—Å—ã–ª–∫–∏/–ø–ª–µ–π–ª–∏—Å—Ç—ã –∏ –≤—ã–¥–∞–µ—Ç –≥–æ—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã —Å –∫–æ–Ω—Ç—Ä–æ–ª–µ–º —Ä–∞–∑–º–µ—Ä–∞ –∏ –æ—á–µ—Ä–µ–¥—å—é –∑–∞–¥–∞—á.
- –ú–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∏—Å–∫ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫: —Ç—Ä–æ—Ç—Ç–ª–∏–Ω–≥, –ª–∏–º–∏—Ç—ã, —Ä–µ—Ç—Ä–∞–∏, –∞—É–¥–∏—Ç—ã —Å–µ–∫—Ä–µ—Ç–æ–≤.

## üîß –°—Ç–µ–∫ –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
- Python 3.11+, Aiogram 3, yt-dlp, aiohttp.
- Redis (–∏–ª–∏ SQLite) –¥–ª—è –æ—á–µ—Ä–µ–¥–∏, state –∏ rate-limit.
- pre-commit + gitleaks + ruff + black.
- CI: lint + –∫–æ—Ä–æ—Ç–∫–∏–π e2e (continue-on-error).

## üõ°Ô∏è –†–∏—Å–∫–∏ –∏ –∫–æ–Ω—Ç—Ä–º–µ—Ä—ã
- –£—Ç–µ—á–∫–∏ —Ç–æ–∫–µ–Ω–∞: —Ö—Ä–∞–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ –≤ `.env`, –∑–∞–ø—É—Å–∫–∞—Ç—å gitleaks (blocking).
- –ö—Ä—É–ø–Ω—ã–µ —Ñ–∞–π–ª—ã: –ø–æ–¥—Å—á–µ—Ç —Ä–∞–∑–º–µ—Ä–∞ –¥–æ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è, —Ä–µ–∑–∫–∞ –Ω–∞ –∞—Ä—Ö–∏–≤—ã, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ `MAX_FILE_MB`.
- –ë–∞–Ω—ã –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤: —Ç–∞–π–º–∞—É—Ç—ã –∏ —Ä–µ—Ç—Ä–∞–∏ yt-dlp, –±–ª–æ–∫-–ª–∏—Å—Ç –¥–æ–º–µ–Ω–æ–≤.
- –ü–∞–¥–µ–Ω–∏–µ –æ—á–µ—Ä–µ–¥–∏: –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–∞—è –æ—á–µ—Ä–µ–¥—å Redis/SQLite, –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–µ –∑–∞–¥–∞—á–∏.

## üß≠ MVP-–∏—Ç–µ—Ä–∞—Ü–∏–∏
1) –°–∫–µ–ª–µ—Ç –±–æ—Ç–∞, `/health`, `/start`, –æ–¥–∏–Ω —Ö—ç–Ω–¥–ª–µ—Ä —Å—Å—ã–ª–∫–∏, –∑–∞–≥–ª—É—à–∫–∞ –æ—Ç–≤–µ—Ç–∞.
2) –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è yt-dlp —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Ä–∞–∑–º–µ—Ä–∞, –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã, –ø—Ä–æ—Å—Ç–æ–π –æ—Ç–≤–µ—Ç.
3) –û—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á + –ø—Ä–æ–≥—Ä–µ—Å—Å, –æ—Ç–º–µ–Ω–∞, –ª–∏–º–∏—Ç—ã –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
4) –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Docker Compose, CI workflow (lint/test, continue-on-error).

## üì¶ Definition of Done —á–µ–∫-–ª–∏—Å—Ç
- `.env.example` –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, `.gitignore` –æ–±–Ω–æ–≤–ª–µ–Ω.
- gitleaks clean, pre-commit —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç –ª–æ–∫–∞–ª—å–Ω–æ.
- README –æ–±–Ω–æ–≤–ª–µ–Ω: —á—Ç–æ —É–º–µ–µ—Ç, –∫–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å, –ª–∏–º–∏—Ç—ã, –¥–µ–º–æ —Å—Ü–µ–Ω–∞—Ä–∏–π.
- docker-compose –ø–æ–¥–Ω–∏–º–∞–µ—Ç –±–æ—Ç, Redis –∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç —Ç–∞–±–ª–∏—Ü—ã/–º–∏–≥—Ä–∞—Ü–∏–∏ (–µ—Å–ª–∏ –Ω—É–∂–Ω—ã).

## üõ∞Ô∏è –î–µ–º–æ-—Å—Ü–µ–Ω–∞—Ä–∏–∏
- GIF: —Å—Å—ã–ª–∫–∞ ‚Üí –≤—ã–±–æ—Ä –∫–∞—á–µ—Å—Ç–≤–∞ ‚Üí –æ–∂–∏–¥–∞–Ω–∏–µ –æ—á–µ—Ä–µ–¥–∏ ‚Üí —Ñ–∞–π–ª –ø—Ä–∏–ª–µ—Ç–µ–ª.
- –û—Ç–º–µ–Ω–∞ –∑–∞–¥–∞—á–∏: `/cancel <id>` ‚Üí –æ—á–µ—Ä–µ–¥—å –ø–µ—Ä–µ—Å—á–∏—Ç–∞–Ω–∞, —Ä–µ—Å—É—Ä—Å—ã –æ—á–∏—â–µ–Ω—ã.
- CLI —Ä–µ–∂–∏–º: –∫–æ–º–∞–Ω–¥–∞ —Å–∫–∞—á–∏–≤–∞–µ—Ç —Ñ–∞–π–ª –ª–æ–∫–∞–ª—å–Ω–æ, –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª—å.

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∞—É–¥–∏–æ-–∏–∑–≤–ª–µ—á–µ–Ω–∏—è (mp3/m4a), –ø—É–±–ª–∏–∫–∞—Ü–∏—è –≤ –∫–∞–Ω–∞–ª.
- –ö–≤–æ—Ç—ã –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∞–¥–º–∏–Ω–∫–∞ —Å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞–º–∏.
- –í–µ–±—Ö—É–∫-—Ä–µ–∂–∏–º —Å reverse proxy (Cloudflare Tunnel/NGROK).
